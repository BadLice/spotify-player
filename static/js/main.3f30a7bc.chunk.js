(this["webpackJsonpspotify-player"]=this["webpackJsonpspotify-player"]||[]).push([[0],{103:function(e,t,a){e.exports=a(146)},108:function(e,t,a){},109:function(e,t,a){},134:function(e,t){},136:function(e,t){},146:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(0),c=a.n(r),l=a(35),s=a.n(l),o=(a(108),a(109),a(159)),i=a(158),u=a(155),m=a(156),f=a(90),h=a(86),d=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{onClick:function(){window.location.href="https://accounts.spotify.com/authorize?client_id=bee70acc71d645e0aeb3ba505672c35d&response_type=token&redirect_uri=http://localhost:3000"},variant:"success"},"Login"))},E=a(28),b=function(e){var t=Object(r.useState)({label:"Track",value:"track"}),a=Object(n.a)(t,2),l=a[0],s=a[1],b=Object(E.g)(),p=b.type,g=b.query,y=b.offset,v=e.search,O=e.history;Object(r.useEffect)((function(){p&&g&&y&&v({q:g,type:p,limit:9,offset:9*y})}),[p,g,y,v]);return c.a.createElement(o.a,{bg:"dark",expand:"lg"},c.a.createElement(o.a.Brand,null,c.a.createElement(o.a.Brand,{className:"text-white"},c.a.createElement("span",{className:"text-success border border-success rounded-pill p-2"},"Spotify"),c.a.createElement("span",null,"Player"))),c.a.createElement(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(o.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(i.a,{className:"mr-auto"}),c.a.createElement(u.a,{inline:!0,onSubmit:function(e){e.preventDefault(),0!==e.target.searchQuery.value.trim().length&&O.push("/search/"+l.value+"/"+e.target.searchQuery.value.trim().replace(" ","+")+"/0")}},e.logged?c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{name:"searchType",onSelect:function(e){s(JSON.parse(e))},className:"mr-2"},c.a.createElement(m.a.Toggle,{variant:"success",id:"dropdown-basic"},l.label),c.a.createElement(m.a.Menu,null,c.a.createElement(m.a.Item,{eventKey:JSON.stringify({label:"Track",value:"track"})},"Track"),c.a.createElement(m.a.Item,{eventKey:JSON.stringify({label:"Artist",value:"artist"})},"Artist"),c.a.createElement(m.a.Item,{eventKey:JSON.stringify({label:"Album",value:"album"})},"Album"),c.a.createElement(m.a.Item,{eventKey:JSON.stringify({label:"Playlist",value:"playlist"})},"Playlist"))),c.a.createElement(f.a,{type:"text",placeholder:"Search",className:"mr-sm-2",name:"searchQuery"}),c.a.createElement(h.a,{type:"submit"},"Search")):c.a.createElement(d,null))))},p=a(98),g=a.n(p),y=a(161),v=a(153),O=a(69),k=function(e){return c.a.createElement(h.a,{className:"float-right mb-2 rounded-circle",variant:"outline-success"},"\u25b6")},N=function(e){var t=Object(r.useState)(!0),a=Object(n.a)(t,2),l=a[0],s=a[1];if("track"!==e.track.type)return null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{className:"d-inline-block m-2 w-30 h-25 border-success rounded",bg:"dark",text:"success"},c.a.createElement("center",null,c.a.createElement(v.a,{animation:"grow",variant:"light",style:{margin:e.track.album.images[1].width/2,display:l?"block":"none"}})),c.a.createElement(y.a.Img,{variant:"top",src:e.track.album.images[1].url,onLoad:function(){s(!1)},className:l?"d-none":"d-block"}),c.a.createElement(y.a.Body,null,c.a.createElement(y.a.Title,null,c.a.createElement(O.a,null,e.track.name)),c.a.createElement("span",{className:"text-info"},function(e){var t=e/1e3,a=Math.floor(t/60);return t-=60*a,(a=a.toFixed(0))+":"+(t=t.toFixed(0))}(e.track.duration_ms)),c.a.createElement("br",null),c.a.createElement(O.a,{className:"text-white-50"},e.track.artists.reduce((function(e,t){return e+t.name+", "}),"").slice(0,-2)),c.a.createElement(k,null))))},j=a(154),x=a(160),w=a(101),S=a(41),_=function(e){var t=Object(E.g)(),a=t.type,n=t.query,r=function(t){var r=Object(w.a)({},e.searchOptions);r.offset=r.limit*t,e.history.push("/search/"+a+"/"+n+"/"+t)};if(!e.searchOptions)return c.a.createElement(c.a.Fragment,null);for(var l=e.searchOptions.offset/e.searchOptions.limit,s=l+1,o=[],i=function(e){e>0?o.push(c.a.createElement(S.a.Item,{key:e,active:e===s,onClick:function(){return r(e-1)}},e)):o.push(c.a.createElement(S.a.Item,{key:e,disabled:!0},"\xa0"))},u=l+1-2;u<=l+1+2;u++)i(u);return c.a.createElement(S.a,{className:"mx-auto",style:{width:"200px"}},c.a.createElement(S.a.Prev,{disabled:0===l,onClick:function(){return r(s-2)}}),o,c.a.createElement(S.a.Next,{onClick:function(){return r(s)}}))},T=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(j.a,{className:"pt-2 pb-2"},c.a.createElement(x.a,{defaultActiveKey:"0",className:"mb-2 border-0 rounded-lg"},c.a.createElement(y.a,{className:"mb-2 border-0 text-light rounded-lg"},c.a.createElement(x.a.Toggle,{as:y.a.Header,eventKey:"0",className:"bg-secondary"},"Tracks"),c.a.createElement(x.a.Collapse,{eventKey:"0",className:"border-0"},c.a.createElement(y.a.Body,{className:"bg-transparent border-0 bg-dark-2"},e.searchResult&&e.searchResult.tracks&&e.searchResult.tracks.items.map((function(e){return c.a.createElement(N,{key:e.id,track:e})})))))),c.a.createElement(_,{history:e.history,offset:e.offset,next:e.next,resultsPerPage:6,search:e.search,searchOptions:e.searchOptions})))},F=function(e){var t=function(e){var t=Object(r.useState)(null),a=Object(n.a)(t,2),c=a[0],l=a[1],s=Object(r.useState)(null),o=Object(n.a)(s,2),i=o[0],u=o[1],m=Object(r.useState)(null),f=Object(n.a)(m,2),h=f[0],d=f[1];return Object(r.useEffect)((function(){if(h&&e){var t=!0,a=Object.keys(h).reduce((function(e,t){return e+"&"+t+"="+h[t]}),"access_token="+e);return g.a.get("https://api.spotify.com/v1/search?"+a).then((function(e){var a=e.data;t&&(console.log(a),l(a))})).catch((function(e){return u(e)})),function(){return t=!1}}}),[h,e]),Object(r.useEffect)((function(){i&&console.error(i)}),[i]),{searchResult:c,search:d,searchOptions:h,error:i}}(e._TOKEN),a=t.searchResult,l=t.search,s=t.searchOptions,o=Object(E.f)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.c,null,c.a.createElement(E.a,{path:"/",exact:!0},c.a.createElement(b,{logged:e.logged,search:l,history:o})),c.a.createElement(E.a,{path:"/search/:type/:query/:offset",exact:!0},c.a.createElement(b,{logged:e.logged,search:l,history:o}),c.a.createElement(T,{searchResult:a,search:l,searchOptions:s,history:o})),c.a.createElement(E.a,null,c.a.createElement("p",{className:"text-white"},"NOT FOUND"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(43),I=a(157),J=function(e){var t=function(){var e=Object(r.useState)(null),t=Object(n.a)(e,2),a=t[0],c=t[1],l=Object(I.a)(["access_token"]),s=Object(n.a)(l,2),o=s[0].access_token,i=s[1];return Object(r.useEffect)((function(){if(!a)if(o)c(o);else{var e=window.location.href,t=e.indexOf("access_token="),n="access_token=".length,r=e.indexOf("&token_type");if(-1!==t&&-1!==r){var l=e.substring(t+n,r);c(l),i("access_token",l,{maxAge:3600})}}}),[i,a,o]),a}();return c.a.cloneElement(e.children,{logged:!!t,_TOKEN:t})};s.a.render(c.a.createElement(K.a,null,c.a.createElement(J,null,c.a.createElement(F,{logged:!1}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);
//# sourceMappingURL=main.3f30a7bc.chunk.js.map